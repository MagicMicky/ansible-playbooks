# Catppuccin Starship Configuration
# Generated by Ansible for {{ machine_profile }} profile
# Character: {{ starship_char }}
# Color: {{ starship_color }}
{% if machine_profile == 'server' %}
# Server type: {{ server_type | default('generic') }}
{% endif %}

{% if machine_profile == 'server' or machine_profile == 'wsl' %}
format = """
[\\[{{ starship_char }}\\]](fg:{{ starship_color }}) \
$username\
[@](fg:{{ starship_color }})\
$hostname \
$directory\
$git_branch\
$git_status\
$cmd_duration\
$character"""
{% else %}
format = """
[\\[{{ starship_char }}\\]](fg:{{ starship_color }}) \
$directory\
$git_branch\
$git_status\
$cmd_duration\
$character"""
{% endif %}

[directory]
style = "bold"
format = "[$path](fg:{{ starship_color }}) "
truncation_length = 5  # Show up to 5 parent directories before truncating
truncate_to_repo = true  # In git repos, show path from repo root (smart!)
truncation_symbol = "‚Ä¶/"
repo_root_style = "bold fg:{{ starship_color }}"  # Highlight repo root name
repo_root_format = "[$before_root_path]($style)[$repo_root]($repo_root_style)[$path]($style)[$read_only]($read_only_style) "
# fish_style_pwd_dir_length of 0 means show full directory names (no shortening)
# This ensures you see /var/log not /v/log
fish_style_pwd_dir_length = 0
home_symbol = "~"
read_only = " üîí"

[git_branch]
# Use Starship's default symbol (auto-detects Nerd Font support)
style = "bold"
format = "on [$symbol$branch](fg:{{ starship_color }}) "

[git_status]
style = "bold"
format = "([$all_status$ahead_behind](fg:{{ catppuccin_yellow }}) )"
conflicted = "="
ahead = "‚á°${count}"
behind = "‚á£${count}"
diverged = "‚áï‚á°${ahead_count}‚á£${behind_count}"
untracked = "?"
stashed = "\\$"
modified = "!"
staged = "+"
renamed = "¬ª"
deleted = "‚úò"

[cmd_duration]
min_time = 2_000  # Show duration only if command took longer than 2 seconds
format = "took [$duration](bold fg:{{ catppuccin_yellow }}) "
show_milliseconds = false

[character]
success_symbol = "[‚ùØ](fg:{{ catppuccin_green }})"
error_symbol = "[‚ùØ](fg:{{ catppuccin_red }})"

[username]
style_user = "bold fg:{{ starship_color }}"
style_root = "bold fg:{{ catppuccin_red }}"
format = "[$user]($style)"
disabled = false
show_always = true

[hostname]
ssh_only = false
format = "[$hostname](bold fg:{{ starship_color }})"
disabled = false
