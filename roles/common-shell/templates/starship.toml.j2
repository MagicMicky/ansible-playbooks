# Catppuccin Starship Configuration
# Generated by Ansible for {{ machine_profile }} profile
# Three-theme system: Workstation (Sapphire), Homelab (Green), Server (Mauve)

{% set theme_map = {
    'personal': {'accent': catppuccin_sapphire, 'char': 'Œª', 'type': 'workstation'},
    'pro': {'accent': catppuccin_sapphire, 'char': 'Œª', 'type': 'workstation'},
    'wsl': {'accent': catppuccin_sapphire, 'char': 'Œª', 'type': 'workstation'},
    'laptop': {'accent': catppuccin_sapphire, 'char': 'Œª', 'type': 'workstation'},
    'homelab': {'accent': catppuccin_green, 'char': '‚óè', 'type': 'homelab'},
    'server': {'accent': catppuccin_mauve, 'char': '‚òÖ', 'type': 'server'}
} %}
{% set theme = theme_map.get(machine_profile, theme_map['server']) %}

# Machine type: {{ theme.type }}
# Accent color: {{ theme.accent }}
# Character: {{ theme.char }}

format = """
[\\[{{ theme.char }}\\] ](fg:{{ theme.accent }})\
$directory\
$git_branch\
$git_status\
$cmd_duration\
$character"""

[directory]
style = "bold"
format = "[$path](fg:{{ theme.accent }}) "
truncation_length = 10  # Show up to 10 parent directories before truncating
truncate_to_repo = true  # In git repos, start from repo root
truncation_symbol = "‚Ä¶/"
# fish_style_pwd_dir_length of 0 means show full directory names (no shortening)
# This ensures you see /var/log not /v/log
fish_style_pwd_dir_length = 0
home_symbol = "~"
read_only = " üîí"

[git_branch]
# Use Starship's default symbol (auto-detects Nerd Font support)
style = "bold"
format = "on [$symbol$branch](fg:{{ theme.accent }}) "

[git_status]
style = "bold"
format = "([$all_status$ahead_behind](fg:{{ catppuccin_yellow }}) )"
conflicted = "="
ahead = "‚á°${count}"
behind = "‚á£${count}"
diverged = "‚áï‚á°${ahead_count}‚á£${behind_count}"
untracked = "?"
stashed = "$"
modified = "!"
staged = "+"
renamed = "¬ª"
deleted = "‚úò"

[cmd_duration]
min_time = 2_000  # Show duration only if command took longer than 2 seconds
format = "took [$duration](bold fg:{{ catppuccin_yellow }}) "
show_milliseconds = false

[character]
success_symbol = "[‚ùØ](fg:{{ catppuccin_green }})"
error_symbol = "[‚ùØ](fg:{{ catppuccin_red }})"
