# Catppuccin Starship Configuration
# Generated by Ansible for {{ machine_profile }} profile
# Three-theme system: Workstation (Sapphire), Homelab (Green), Server (Mauve)

{% set theme_map = {
    'personal': {'accent': catppuccin_sapphire, 'char': 'λ', 'type': 'workstation'},
    'pro': {'accent': catppuccin_sapphire, 'char': 'λ', 'type': 'workstation'},
    'wsl': {'accent': catppuccin_sapphire, 'char': 'λ', 'type': 'workstation'},
    'laptop': {'accent': catppuccin_sapphire, 'char': 'λ', 'type': 'workstation'},
    'homelab': {'accent': catppuccin_green, 'char': '●', 'type': 'homelab'},
    'server': {'accent': catppuccin_mauve, 'char': '★', 'type': 'server'}
} %}
{% set theme = theme_map.get(machine_profile, theme_map['server']) %}

# Machine type: {{ theme.type }}
# Accent color: {{ theme.accent }}
# Character: {{ theme.char }}

format = """
[\\[{{ theme.char }}\\] ](fg:{{ theme.accent }})\
$directory\
$git_branch\
$git_status\
$cmd_duration\
$character"""

[directory]
style = "bold"
format = "[$path](fg:{{ theme.accent }}) "
truncation_length = 3
truncate_to_repo = true

[git_branch]
# Use Starship's default symbol (auto-detects Nerd Font support)
style = "bold"
format = "on [$symbol$branch](fg:{{ theme.accent }}) "

[git_status]
style = "bold"
format = "([$all_status$ahead_behind](fg:{{ catppuccin_yellow }}) )"
conflicted = "="
ahead = "⇡${count}"
behind = "⇣${count}"
diverged = "⇕⇡${ahead_count}⇣${behind_count}"
untracked = "?"
stashed = "$"
modified = "!"
staged = "+"
renamed = "»"
deleted = "✘"

[cmd_duration]
min_time = 2_000  # Show duration only if command took longer than 2 seconds
format = "took [$duration](bold fg:{{ catppuccin_yellow }}) "
show_milliseconds = false

[character]
success_symbol = "[❯](fg:{{ catppuccin_green }})"
error_symbol = "[❯](fg:{{ catppuccin_red }})"
