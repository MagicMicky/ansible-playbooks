[0;34mInstalling Ansible Galaxy dependencies...[0m 
ansible-galaxy install -r requirements.yml
[WARNING]: - elliotweiser.osx-command-line-tools (2.3.0) is already installed -
use --force to change version to unspecified
Starting galaxy role install process
- work-tasks (master) is already installed, skipping.
Starting galaxy collection install process
Nothing to do. All requested collections are already installed. If you want to reinstall them, consider using `--force`.
[0;34mRunning syntax validation...[0m 
=== Ansible Playbook Syntax Validation ===
Working directory: /home/magicmicky/Development/terminal_improvements/ansible-playbooks

Installing Ansible dependencies...

Checking personal.yml... âœ“ PASS
Checking work.yml... âœ“ PASS
Checking setup.yml... âœ“ PASS
Checking base.yml... âœ“ PASS
Checking shell.yml... âœ“ PASS

=== Results ===
Passed: 5
Failed: 0

âœ… All playbooks passed syntax validation
[0;34mBuilding Docker test containers...[0m 
cd tests/docker && docker compose build
Compose can now delegate builds to bake for better performance.
 To do so, set COMPOSE_BAKE=true.
#0 building with "default" instance using docker driver

#1 [server-test internal] load build definition from Dockerfile.ubuntu
#1 transferring dockerfile: 871B done
#1 DONE 0.0s

#2 [ubuntu-test internal] load build definition from Dockerfile.ubuntu
#2 transferring dockerfile: 871B done
#2 DONE 0.0s

#3 [wsl-test internal] load build definition from Dockerfile.ubuntu
#3 transferring dockerfile: 871B done
#3 DONE 0.0s

#4 [server-test auth] library/ubuntu:pull token for registry-1.docker.io
#4 DONE 0.0s

#5 [wsl-test internal] load metadata for docker.io/library/ubuntu:22.04
#5 DONE 0.8s

#6 [server-test internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [ubuntu-test internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [wsl-test 1/5] FROM docker.io/library/ubuntu:22.04@sha256:66508e467c97edcfa77a3c70c456b62ef054c336d131fc4d64672174730227be
#8 DONE 0.0s

#9 [wsl-test internal] load .dockerignore
#9 transferring context: 2B done
#9 DONE 0.0s

#10 [wsl-test 2/5] RUN apt-get update && apt-get install -y     python3     python3-pip     git     sudo     zsh     curl     wget     build-essential     software-properties-common     acl     && rm -rf /var/lib/apt/lists/*
#10 CACHED

#11 [wsl-test 3/5] RUN pip3 install --no-cache-dir ansible ansible-lint
#11 CACHED

#12 [wsl-test 4/5] RUN useradd -m -s /bin/bash testuser &&     echo "testuser ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers
#12 CACHED

#13 [wsl-test 5/5] WORKDIR /ansible
#13 CACHED

#14 [server-test] exporting to image
#14 exporting layers done
#14 writing image sha256:deec4411dcd66c5a8bf164bf0e3d0dc9577952d91c3da083e59286685c184145 done
#14 naming to docker.io/library/ansible-playbooks-test:ubuntu done
#14 DONE 0.0s

#15 [ubuntu-test] exporting to image
#15 exporting layers done
#15 writing image sha256:499d7d634042dee8833b4fc051fd901fa0a4917a7d46a6421a1e5ef37ffa6a82 done
#15 naming to docker.io/library/ansible-playbooks-test:ubuntu done
#15 DONE 0.0s

#16 [wsl-test] exporting to image
#16 exporting layers done
#16 writing image sha256:272a50fb81b32fa1900a9ee22e6706f9a7042bcd5b36df8a14d5665d70b70df0 done
#16 naming to docker.io/library/ansible-playbooks-test:ubuntu done
#16 DONE 0.0s

#17 [server-test] resolving provenance for metadata file
#17 DONE 0.0s

#18 [ubuntu-test] resolving provenance for metadata file
#18 DONE 0.0s

#19 [wsl-test] resolving provenance for metadata file
#19 DONE 0.0s
 server-test  Built
 ubuntu-test  Built
 wsl-test  Built
[0;34mStarting Docker test containers...[0m 
cd tests/docker && docker compose up -d
 Network docker_default  Creating
 Network docker_default  Created
 Container ansible-test-ubuntu  Creating
 Container ansible-test-wsl  Creating
 Container ansible-test-server  Creating
 Container ansible-test-ubuntu  Created
 Container ansible-test-server  Created
 Container ansible-test-wsl  Created
 Container ansible-test-server  Starting
 Container ansible-test-ubuntu  Starting
 Container ansible-test-wsl  Starting
 Container ansible-test-server  Started
 Container ansible-test-ubuntu  Started
 Container ansible-test-wsl  Started
[0;34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m 
[0;34mâ•‘  Running Test Suite                                   â•‘[0m 
[0;34mâ•‘  - WSL tests in wsl-test container                    â•‘[0m 
[0;34mâ•‘  - Server tests in server-test container              â•‘[0m 
[0;34mâ•‘  - Full idempotency coverage                          â•‘[0m 
[0;34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m 
[0;34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;34mâ•‘  Ansible Playbooks - Isolated Test Suite  â•‘[0m
[0;34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;34mInstalling Ansible dependencies in containers...[0m
[1;35m[WARNING]: - elliotweiser.osx-command-line-tools (2.3.0) is already installed -[0m
[1;35muse --force to change version to unspecified[0m
Starting galaxy role install process
- work-tasks (master) is already installed, skipping.
Starting galaxy collection install process
Process install dependency map
Starting collection install process
'community.general:9.5.2' is already installed, skipping.
Downloading https://galaxy.ansible.com/api/v3/plugin/ansible/content/published/collections/artifacts/geerlingguy-mac-4.1.0.tar.gz to /home/testuser/.ansible/tmp/ansible-local-744n1ne0f/tmpkv4j8ufj/geerlingguy-mac-4.1.0-l6emj45z
Installing 'geerlingguy.mac:4.1.0' to '/home/testuser/.ansible/collections/ansible_collections/geerlingguy/mac'
geerlingguy.mac:4.1.0 was installed successfully
[1;35m[WARNING]: - elliotweiser.osx-command-line-tools (2.3.0) is already installed -[0m
[1;35muse --force to change version to unspecified[0m
Starting galaxy role install process
- work-tasks (master) is already installed, skipping.
Starting galaxy collection install process
Process install dependency map
Starting collection install process
'community.general:9.5.2' is already installed, skipping.
Downloading https://galaxy.ansible.com/api/v3/plugin/ansible/content/published/collections/artifacts/geerlingguy-mac-4.1.0.tar.gz to /home/testuser/.ansible/tmp/ansible-local-7_n8jlryr/tmp78mwg5ww/geerlingguy-mac-4.1.0-o8t4_12i
Installing 'geerlingguy.mac:4.1.0' to '/home/testuser/.ansible/collections/ansible_collections/geerlingguy/mac'
geerlingguy.mac:4.1.0 was installed successfully

[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;34m  Phase 1: Syntax Validation[0m
[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 1: Syntax Validation[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
=== Ansible Playbook Syntax Validation ===
Working directory: /home/magicmicky/Development/terminal_improvements/ansible-playbooks

Installing Ansible dependencies...

Checking personal.yml... âœ“ PASS
Checking work.yml... âœ“ PASS
Checking setup.yml... âœ“ PASS
Checking base.yml... âœ“ PASS
Checking shell.yml... âœ“ PASS

=== Results ===
Passed: 5
Failed: 0

âœ… All playbooks passed syntax validation
[0;32mâœ… PASSED: Syntax Validation[0m

[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;34m  Phase 2: WSL Playbook Tests[0m
[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 2: WSL Playbook (Check Mode)[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m

PLAY [Configure WSL Environment] ***********************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Display deployment information] ******************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Deploying modern shell configuration to WSL[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Dotfiles Location: /home/testuser/dotfiles-test[0m
[0;32m    Branch: modern-shell-2025[0m

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for localhost[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [localhost][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for localhost[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [localhost][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [localhost][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for localhost[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [localhost][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [localhost][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [localhost][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for localhost[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for localhost[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;33mchanged: [localhost][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [localhost][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Server Type: N/A - not a server[0m
[0;32m    Hostname: localhost[0m
[0;32m    Starship Character: Î»[0m
[0;32m    Starship Color: #74c7ec[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;33mchanged: [localhost][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;33mchanged: [localhost][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;33mchanged: [localhost] => (item=01-zinit.zsh)[0m
[0;33mchanged: [localhost] => (item=10-path.zsh)[0m
[0;33mchanged: [localhost] => (item=20-env.zsh)[0m
[0;33mchanged: [localhost] => (item=25-tools.zsh)[0m
[0;33mchanged: [localhost] => (item=30-aliases.zsh)[0m
[0;33mchanged: [localhost] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;33mchanged: [localhost] => (item=plugins.zsh)[0m
[0;33mchanged: [localhost] => (item=config.zsh)[0m
[0;33mchanged: [localhost] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for localhost[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [localhost][0m

TASK [common-shell : Check current shell] **************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Get zsh path] *********************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;36mskipping: [localhost][0m

TASK [Display completion message] **********************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: "âœ… WSL configuration complete!\n\nNext steps:\n1. Start a new shell: exec zsh\n2. Or set as default: chsh -s $(which zsh)\n\nOn first startup:\n- Zinit will auto-install (takes ~10 seconds)\n- Plugins will download automatically\n- You'll see: \"\U0001F680 Modern shell loaded | Machine: wsl\"\n\nYour prompt should show: [Î»] in blue"[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=43  [0m [0;33mchanged=19  [0m unreachable=0    failed=0    [0;36mskipped=17  [0m rescued=0    ignored=0   

[0;32mâœ… PASSED: WSL Playbook (Check Mode)[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 3: WSL Playbook (Apply)[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m

PLAY [Configure WSL Environment] ***********************************************

TASK [Display deployment information] ******************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Deploying modern shell configuration to WSL[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Dotfiles Location: /home/testuser/dotfiles-test[0m
[0;32m    Branch: modern-shell-2025[0m

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for localhost[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [localhost][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for localhost[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [localhost][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [localhost][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for localhost[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [localhost][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;33mchanged: [localhost][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [localhost][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for localhost[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for localhost[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;33mchanged: [localhost][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [localhost][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Server Type: N/A - not a server[0m
[0;32m    Hostname: localhost[0m
[0;32m    Starship Character: Î»[0m
[0;32m    Starship Color: #74c7ec[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;33mchanged: [localhost][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;33mchanged: [localhost][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;33mchanged: [localhost][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;33mchanged: [localhost] => (item=01-zinit.zsh)[0m
[0;33mchanged: [localhost] => (item=10-path.zsh)[0m
[0;33mchanged: [localhost] => (item=20-env.zsh)[0m
[0;33mchanged: [localhost] => (item=25-tools.zsh)[0m
[0;33mchanged: [localhost] => (item=30-aliases.zsh)[0m
[0;33mchanged: [localhost] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;33mchanged: [localhost] => (item=plugins.zsh)[0m
[0;33mchanged: [localhost] => (item=config.zsh)[0m
[0;33mchanged: [localhost] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;33mchanged: [localhost][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for localhost[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [localhost][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [localhost][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;33mchanged: [localhost][0m

TASK [Display completion message] **********************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: "âœ… WSL configuration complete!\n\nNext steps:\n1. Start a new shell: exec zsh\n2. Or set as default: chsh -s $(which zsh)\n\nOn first startup:\n- Zinit will auto-install (takes ~10 seconds)\n- Plugins will download automatically\n- You'll see: \"\U0001F680 Modern shell loaded | Machine: wsl\"\n\nYour prompt should show: [Î»] in blue"[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=50  [0m [0;33mchanged=23  [0m unreachable=0    failed=0    [0;36mskipped=9   [0m rescued=0    ignored=0   

[0;32mâœ… PASSED: WSL Playbook (Apply)[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 4: WSL Shell Validation[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
=== Shell Configuration Validation ===

1. Shell Startup Time
{nl}{i} Downloading{b}{file}zsh-users/zsh-autosuggestions{rst}{rst}

{m} Compiling{file}zsh-autosuggestions.plugin.zsh{rst} [{happy}OK{rst}]
{nl}{i} Downloading{b}{file}zdharma-continuum/fast-syntax-highlighting{rst}{rst}

{m} Compiling{file}fast-syntax-highlighting.plugin.zsh{rst} [{happy}OK{rst}]
{m} Installed{num}1{rst} completion
ğŸ”§ Vanilla baseline loaded | Profile: wsl | Stage: Complete (full baseline)
  [0;32mâœ“ zsh starts without errors[0m
  [1;33mâš  /usr/bin/time not available, skipping timing measurement[0m

2. Essential Tools
  Checking Starship prompt... [0;32mâœ“[0m
  Checking fzf fuzzy finder... [0;32mâœ“[0m
  Checking zoxide directory jumper... [0;32mâœ“[0m
  Checking ripgrep... [0;32mâœ“[0m

3. Laptop Tools (optional)
  [1;33mâ—‹[0m bat (optional, not installed)
  [1;33mâ—‹[0m eza (optional, not installed)
  [1;33mâ—‹[0m fd (optional, not installed)

4. Starship Configuration & Theme
  [0;32mâœ“[0m starship.toml exists
  Machine profile: wsl
  [0;32mâœ“[0m Correct character for workstation (sapphire): Î»
  [0;32mâœ“[0m Correct accent color: #74c7ec
  [0;32mâœ“[0m Starship prompt renders
  [0;32mâœ“[0m Prompt contains expected character

5. Zinit Plugin Manager
  [0;32mâœ“[0m zinit directory exists
  [0;32mâœ“[0m zinit.zsh file present

6. Zsh Configuration
  [0;32mâœ“[0m .zshrc exists
  [0;32mâœ“[0m .zshrc is readable
  [0;32mâœ“[0m .zshrc symlink target exists: /home/testuser/dotfiles-test/zsh/.zshrc
  [0;32mâœ“[0m .zshrc has content

7. Dotfiles Content
  [0;32mâœ“[0m .zshrc is symlinked
    Target: /home/testuser/dotfiles-test/zsh/.zshrc
    Dotfiles: /home/testuser/dotfiles-test
  [0;32mâœ“[0m Dotfiles directory exists
  [0;32mâœ“[0m Found 6 core/*.zsh files
  [0;32mâœ“[0m profiles/ directory exists

=== Results ===
Passed: 21
Failed: 0

[0;32mâœ… Shell validation PASSED[0m
[0;32mâœ… PASSED: WSL Shell Validation[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 5: WSL Idempotency[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Testing Playbook Idempotency ===[0m
Playbook: playbooks/wsl/setup.yml
Inventory: tests/inventories/wsl.yml

[1;33m>>> First run (applying changes)...[0m

PLAY [Configure WSL Environment] ***********************************************

TASK [Display deployment information] ******************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Deploying modern shell configuration to WSL[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Dotfiles Location: /home/testuser/dotfiles-test[0m
[0;32m    Branch: modern-shell-2025[0m

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for localhost[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [localhost][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for localhost[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [localhost][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [localhost][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for localhost[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [localhost][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [localhost][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;32mok: [localhost][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [localhost][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for localhost[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for localhost[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;32mok: [localhost][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [localhost][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Server Type: N/A - not a server[0m
[0;32m    Hostname: localhost[0m
[0;32m    Starship Character: Î»[0m
[0;32m    Starship Color: #74c7ec[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;32mok: [localhost][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;32mok: [localhost][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;32mok: [localhost][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;32mok: [localhost] => (item=01-zinit.zsh)[0m
[0;32mok: [localhost] => (item=10-path.zsh)[0m
[0;32mok: [localhost] => (item=20-env.zsh)[0m
[0;32mok: [localhost] => (item=25-tools.zsh)[0m
[0;32mok: [localhost] => (item=30-aliases.zsh)[0m
[0;32mok: [localhost] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;32mok: [localhost] => (item=plugins.zsh)[0m
[0;32mok: [localhost] => (item=config.zsh)[0m
[0;32mok: [localhost] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for localhost[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [localhost][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [localhost][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;32mok: [localhost][0m

TASK [Display completion message] **********************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: "âœ… WSL configuration complete!\n\nNext steps:\n1. Start a new shell: exec zsh\n2. Or set as default: chsh -s $(which zsh)\n\nOn first startup:\n- Zinit will auto-install (takes ~10 seconds)\n- Plugins will download automatically\n- You'll see: \"\U0001F680 Modern shell loaded | Machine: wsl\"\n\nYour prompt should show: [Î»] in blue"[0m

PLAY RECAP *********************************************************************
[0;32mlocalhost[0m                  : [0;32mok=45  [0m changed=0    unreachable=0    failed=0    [0;36mskipped=14  [0m rescued=0    ignored=0   


[1;33m>>> Second run (testing idempotency)...[0m

PLAY [Configure WSL Environment] ***********************************************

TASK [Display deployment information] ******************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Deploying modern shell configuration to WSL[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Dotfiles Location: /home/testuser/dotfiles-test[0m
[0;32m    Branch: modern-shell-2025[0m

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for localhost[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [localhost][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for localhost[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [localhost][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [localhost][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for localhost[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [localhost][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [localhost][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;32mok: [localhost][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [localhost][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for localhost[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for localhost[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;32mok: [localhost][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [localhost][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [localhost] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: wsl[0m
[0;32m    Server Type: N/A - not a server[0m
[0;32m    Hostname: localhost[0m
[0;32m    Starship Character: Î»[0m
[0;32m    Starship Color: #74c7ec[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;32mok: [localhost][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [localhost][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;32mok: [localhost][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;32mok: [localhost][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [localhost][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [localhost][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [localhost][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;32mok: [localhost][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;32mok: [localhost][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;32mok: [localhost] => (item=01-zinit.zsh)[0m
[0;32mok: [localhost] => (item=10-path.zsh)[0m
[0;32mok: [localhost] => (item=20-env.zsh)[0m
[0;32mok: [localhost] => (item=25-tools.zsh)[0m
[0;32mok: [localhost] => (item=30-aliases.zsh)[0m
[0;32mok: [localhost] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;32mok: [localhost] => (item=plugins.zsh)[0m
[0;32mok: [localhost] => (item=config.zsh)[0m
[0;32mok: [localhost] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;32mok: [localhost][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for localhost[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [localhost][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [localhost][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [localhost][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;32mok: [localhost][0m

TASK [Display completion message] **********************************************
[0;32mok: [localhost] => [0m
[0;32m  msg: "âœ… WSL configuration complete!\n\nNext steps:\n1. Start a new shell: exec zsh\n2. Or set as default: chsh -s $(which zsh)\n\nOn first startup:\n- Zinit will auto-install (takes ~10 seconds)\n- Plugins will download automatically\n- You'll see: \"\U0001F680 Modern shell loaded | Machine: wsl\"\n\nYour prompt should show: [Î»] in blue"[0m

PLAY RECAP *********************************************************************
[0;32mlocalhost[0m                  : [0;32mok=45  [0m changed=0    unreachable=0    failed=0    [0;36mskipped=14  [0m rescued=0    ignored=0   


[0;32mâœ… Idempotency test PASSED[0m
No changes detected on second run
[0;32mâœ… PASSED: WSL Idempotency[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 6: WSL Security Validation[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Security Validation ===[0m

1. SSH Key Permissions
  [1;33mâ—‹[0m No .ssh directory found (skipping SSH key checks)

2. Config File Ownership
  [0;32mâœ“[0m .zshrc owned by testuser
  [0;32mâœ“[0m starship.toml owned by testuser
  [0;32mâœ“[0m .zsh.d owned by testuser
  [0;32mâœ“[0m bin owned by testuser

3. No Secrets in Dotfiles
  [0;32mâœ“[0m No secrets detected in 01-zinit.zsh
  [0;32mâœ“[0m No secrets detected in 10-path.zsh
  [0;32mâœ“[0m No secrets detected in 20-env.zsh
  [0;32mâœ“[0m No secrets detected in 25-tools.zsh
  [0;32mâœ“[0m No secrets detected in 30-aliases.zsh
  [0;32mâœ“[0m No secrets detected in 40-functions.zsh
  [0;32mâœ“[0m No secrets detected in .zshrc
  [0;32mâœ“[0m No secrets detected in .zshenv
  [0;32mâœ“[0m No secrets detected in starship.toml

4. Sensitive Files Not in Dotfiles Repository
  [0;32mâœ“[0m .env not in dotfiles repository
  [0;32mâœ“[0m credentials.json not in dotfiles repository
  [0;32mâœ“[0m .aws/credentials not in dotfiles repository
  [0;32mâœ“[0m .ssh/id_rsa not in dotfiles repository
  [0;32mâœ“[0m .netrc not in dotfiles repository

5. Sudoers Configuration
  [1;33mâ—‹[0m User has passwordless sudo (test environment)


=== Assertion Summary ===
Passed: [0;32m19[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: WSL Security Validation[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 7: WSL Tool Versions[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Tool Version Verification ===[0m

1. Essential Tools
  [0;32mâœ“[0m zsh version 5.8.1 (expected major: 5)
  [0;32mâœ“[0m git version 2.34.1 (expected major: 2)
  [0;32mâœ“[0m starship version 1.24.0 (expected major: 1)

2. Modern Shell Tools
  [1;33mâ—‹[0m fzf not installed (optional tool)
  [1;33mâ—‹[0m zoxide not installed (optional tool)
  [0;32mâœ“[0m rg version 13.0.0 (expected major: 13)
  [1;33mâ—‹[0m bat not installed (optional tool)
  [1;33mâ—‹[0m eza not installed (optional tool)
  [1;33mâ—‹[0m fd not installed (optional tool)

3. Build Tools (if available)
  [0;32mâœ“[0m make version 4.3 (expected major: 4)
  [0;32mâœ“[0m curl version 7.81.0 (expected major: 7)
  [0;32mâœ“[0m wget version 1.21.2 (expected major: 1)

4. Python & Ansible
  [0;32mâœ“[0m python3 version 3.10.12 (expected major: 3)
  [0;32mâœ“[0m ansible version 2.17.14 (expected major: 2)

=== Version Check Summary ===
Note: Major version mismatches may indicate compatibility issues
Optional tools are not required for basic functionality


=== Assertion Summary ===
Passed: [0;32m9[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: WSL Tool Versions[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 8: WSL Profile Isolation[0m
[1;33mContainer: wsl-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Profile Isolation Validation ===[0m

1. Machine Type Detection
  [0;32mâœ“[0m Machine type marker exists: wsl

2. Profile-Specific Configuration
  [0;32mâœ“[0m Profile config symlink: plugins.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/wsl/plugins.zsh
  [0;32mâœ“[0m Profile config symlink: config.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/wsl/config.zsh
  [0;32mâœ“[0m Profile config symlink: overrides.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/wsl/overrides.zsh

3. Core Configuration Files (Universal Across Profiles)
  [0;32mâœ“[0m Core config exists: 01-zinit.zsh
  [0;32mâœ“[0m Core config exists: 10-path.zsh
  [0;32mâœ“[0m Core config exists: 20-env.zsh
  [0;32mâœ“[0m Core config exists: 30-aliases.zsh

4. Profile-Specific Behavior
  Detected WSL profile
  [0;32mâœ“[0m WSL-specific overrides configured

5. Starship Prompt Configuration
  [0;32mâœ“[0m Starship config exists
  [0;32mâœ“[0m WSL-specific prompt character (Î») configured

6. Profile Isolation (No Cross-Contamination)
  [1;33mâ—‹[0m No profile markers found (using .machine-type only)
  [0;32mâœ“[0m Single active profile (no symlink contamination)

=== Profile Isolation Summary ===
Active Profile: wsl


=== Assertion Summary ===
Passed: [0;32m13[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: WSL Profile Isolation[0m

[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;34m  Phase 3: Server Playbook Tests[0m
[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 9: Server Playbook (Check Mode)[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m

PLAY [Configure Server Environment] ********************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [dev-test-01][0m

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for dev-test-01[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for dev-test-01[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for dev-test-01[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for dev-test-01[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for dev-test-01[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: server[0m
[0;32m    Server Type: dev-server[0m
[0;32m    Hostname: dev-test-01[0m
[0;32m    Starship Character: â—[0m
[0;32m    Starship Color: #cba6f7[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;33mchanged: [dev-test-01] => (item=01-zinit.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=10-path.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=20-env.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=25-tools.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=30-aliases.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;33mchanged: [dev-test-01] => (item=plugins.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=config.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for dev-test-01[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check current shell] **************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Get zsh path] *********************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;36mskipping: [dev-test-01][0m

TASK [Display server type] *****************************************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    âœ… Server configuration complete for dev-test-01[0m
[0;32m  [0m
[0;32m    Machine type will be auto-detected based on hostname:[0m
[0;32m    - prod* â†’ Production (!)[0m
[0;32m    - dev-* â†’ Dev server (Â·)[0m
[0;32m    - gaming* â†’ Gaming (Â·)[0m
[0;32m    - homelab* â†’ Homelab (Â·)[0m

PLAY RECAP *********************************************************************
[0;33mdev-test-01[0m                : [0;32mok=43  [0m [0;33mchanged=19  [0m unreachable=0    failed=0    [0;36mskipped=16  [0m rescued=0    ignored=0   

[0;32mâœ… PASSED: Server Playbook (Check Mode)[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 10: Server Playbook (Apply)[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m

PLAY [Configure Server Environment] ********************************************

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for dev-test-01[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for dev-test-01[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for dev-test-01[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for dev-test-01[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for dev-test-01[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: server[0m
[0;32m    Server Type: dev-server[0m
[0;32m    Hostname: dev-test-01[0m
[0;32m    Starship Character: â—[0m
[0;32m    Starship Color: #cba6f7[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;33mchanged: [dev-test-01] => (item=01-zinit.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=10-path.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=20-env.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=25-tools.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=30-aliases.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;33mchanged: [dev-test-01] => (item=plugins.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=config.zsh)[0m
[0;33mchanged: [dev-test-01] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;33mchanged: [dev-test-01][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for dev-test-01[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;33mchanged: [dev-test-01][0m

TASK [Display server type] *****************************************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    âœ… Server configuration complete for dev-test-01[0m
[0;32m  [0m
[0;32m    Machine type will be auto-detected based on hostname:[0m
[0;32m    - prod* â†’ Production (!)[0m
[0;32m    - dev-* â†’ Dev server (Â·)[0m
[0;32m    - gaming* â†’ Gaming (Â·)[0m
[0;32m    - homelab* â†’ Homelab (Â·)[0m

PLAY RECAP *********************************************************************
[0;33mdev-test-01[0m                : [0;32mok=50  [0m [0;33mchanged=23  [0m unreachable=0    failed=0    [0;36mskipped=8   [0m rescued=0    ignored=0   

[0;32mâœ… PASSED: Server Playbook (Apply)[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 11: Server Shell Validation[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
=== Shell Configuration Validation ===

1. Shell Startup Time
{nl}{i} Downloading{b}{file}zsh-users/zsh-autosuggestions{rst}{rst}

{m} Compiling{file}zsh-autosuggestions.plugin.zsh{rst} [{happy}OK{rst}]
{nl}{i} Downloading{b}{file}zdharma-continuum/fast-syntax-highlighting{rst}{rst}

{m} Compiling{file}fast-syntax-highlighting.plugin.zsh{rst} [{happy}OK{rst}]
{m} Installed{num}1{rst} completion
ğŸ”§ Vanilla baseline loaded | Profile: server | Stage: Complete (full baseline)
  [0;32mâœ“ zsh starts without errors[0m
  [1;33mâš  /usr/bin/time not available, skipping timing measurement[0m

2. Essential Tools
  Checking Starship prompt... [0;32mâœ“[0m
  Checking fzf fuzzy finder... [0;32mâœ“[0m
  Checking zoxide directory jumper... [0;32mâœ“[0m
  Checking ripgrep... [0;32mâœ“[0m

3. Laptop Tools (optional)
  [1;33mâ—‹[0m bat (optional, not installed)
  [1;33mâ—‹[0m eza (optional, not installed)
  [1;33mâ—‹[0m fd (optional, not installed)

4. Starship Configuration & Theme
  [0;32mâœ“[0m starship.toml exists
  Machine profile: server
  [0;32mâœ“[0m Correct character for server (mauve): â—
  [0;32mâœ“[0m Correct accent color: #cba6f7
  [0;32mâœ“[0m Starship prompt renders
  [0;32mâœ“[0m Prompt contains expected character

5. Zinit Plugin Manager
  [0;32mâœ“[0m zinit directory exists
  [0;32mâœ“[0m zinit.zsh file present

6. Zsh Configuration
  [0;32mâœ“[0m .zshrc exists
  [0;32mâœ“[0m .zshrc is readable
  [0;32mâœ“[0m .zshrc symlink target exists: /home/testuser/dotfiles-test/zsh/.zshrc
  [0;32mâœ“[0m .zshrc has content

7. Dotfiles Content
  [0;32mâœ“[0m .zshrc is symlinked
    Target: /home/testuser/dotfiles-test/zsh/.zshrc
    Dotfiles: /home/testuser/dotfiles-test
  [0;32mâœ“[0m Dotfiles directory exists
  [0;32mâœ“[0m Found 6 core/*.zsh files
  [0;32mâœ“[0m profiles/ directory exists

=== Results ===
Passed: 21
Failed: 0

[0;32mâœ… Shell validation PASSED[0m
[0;32mâœ… PASSED: Server Shell Validation[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 12: Server Idempotency[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Testing Playbook Idempotency ===[0m
Playbook: playbooks/servers/shell.yml
Inventory: tests/inventories/ubuntu.yml

[1;33m>>> First run (applying changes)...[0m

PLAY [Configure Server Environment] ********************************************

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for dev-test-01[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for dev-test-01[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for dev-test-01[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for dev-test-01[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for dev-test-01[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: server[0m
[0;32m    Server Type: dev-server[0m
[0;32m    Hostname: dev-test-01[0m
[0;32m    Starship Character: â—[0m
[0;32m    Starship Color: #cba6f7[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;32mok: [dev-test-01] => (item=01-zinit.zsh)[0m
[0;32mok: [dev-test-01] => (item=10-path.zsh)[0m
[0;32mok: [dev-test-01] => (item=20-env.zsh)[0m
[0;32mok: [dev-test-01] => (item=25-tools.zsh)[0m
[0;32mok: [dev-test-01] => (item=30-aliases.zsh)[0m
[0;32mok: [dev-test-01] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;32mok: [dev-test-01] => (item=plugins.zsh)[0m
[0;32mok: [dev-test-01] => (item=config.zsh)[0m
[0;32mok: [dev-test-01] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for dev-test-01[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;32mok: [dev-test-01][0m

TASK [Display server type] *****************************************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    âœ… Server configuration complete for dev-test-01[0m
[0;32m  [0m
[0;32m    Machine type will be auto-detected based on hostname:[0m
[0;32m    - prod* â†’ Production (!)[0m
[0;32m    - dev-* â†’ Dev server (Â·)[0m
[0;32m    - gaming* â†’ Gaming (Â·)[0m
[0;32m    - homelab* â†’ Homelab (Â·)[0m

PLAY RECAP *********************************************************************
[0;32mdev-test-01[0m                : [0;32mok=45  [0m changed=0    unreachable=0    failed=0    [0;36mskipped=13  [0m rescued=0    ignored=0   


[1;33m>>> Second run (testing idempotency)...[0m

PLAY [Configure Server Environment] ********************************************

TASK [Ensure prerequisites are installed] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include platform detection] *******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/detect-platform.yml for dev-test-01[0m

TASK [common-shell : Detect operating system family] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Display detected platform] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Set platform-specific facts] ******************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include Starship installation] ****************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-starship.yml for dev-test-01[0m

TASK [common-shell : Install Starship (macOS)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if Starship is installed (Linux)] *******************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install Starship (Linux)] *********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if starship config exists in dotfiles] **************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Link Starship configuration] ******************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include modern tools installation] ************************
[0;36mincluded: /ansible/roles/common-shell/tasks/install-modern-tools.yml for dev-test-01[0m

TASK [common-shell : Install modern tools (macOS)] *****************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Update apt cache (Debian/Ubuntu)] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install available modern tools (Debian/Ubuntu)] ***********
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .local/bin directory exists] ***********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if fzf is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install fzf with shell integration (Linux)] ***************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Add fzf to PATH in profile config] ************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if zoxide is installed] *****************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Install zoxide (Linux)] ***********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include Zinit setup] **************************************
[0;36mincluded: /ansible/roles/common-shell/tasks/setup-zinit.yml for dev-test-01[0m

TASK [common-shell : Ensure zinit parent directory exists] *********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if zinit is already installed] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone zinit repository] ***********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Include shell configuration] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/configure-shell.yml for dev-test-01[0m

TASK [common-shell : Load Catppuccin theme variables] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/shell directory exists] ********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config directory exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat directory exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .config/bat/themes directory exists] ***************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Detect server type from hostname] *************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set Starship character and color based on machine type] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Show machine configuration] *******************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    Machine Profile: server[0m
[0;32m    Server Type: dev-server[0m
[0;32m    Hostname: dev-test-01[0m
[0;32m    Starship Character: â—[0m
[0;32m    Starship Color: #cba6f7[0m

TASK [common-shell : Generate Starship configuration with machine-specific colors] ***
[0;32mok: [dev-test-01][0m

TASK [common-shell : Download Catppuccin Mocha bat theme] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check if bat is installed] ********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Build bat cache (only if bat is installed and theme was downloaded)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Generate shell theme configuration] ***********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set machine type marker (for documentation/debugging)] ****
[0;32mok: [dev-test-01][0m

TASK [common-shell : Set pro profile marker (work laptop - for documentation/debugging)] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if dotfiles repository exists] **********************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Clone dotfiles repository] ********************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Check if existing .zshrc exists] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Backup existing .zshrc if it exists and is not already a symlink] ***
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Show backup location] *************************************
[0;36mskipping: [dev-test-01][0m

TASK [common-shell : Link new .zshrc] ******************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Ensure .zsh.d directory exists] ***************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Symlink core zsh config files to .zsh.d] ******************
[0;32mok: [dev-test-01] => (item=01-zinit.zsh)[0m
[0;32mok: [dev-test-01] => (item=10-path.zsh)[0m
[0;32mok: [dev-test-01] => (item=20-env.zsh)[0m
[0;32mok: [dev-test-01] => (item=25-tools.zsh)[0m
[0;32mok: [dev-test-01] => (item=30-aliases.zsh)[0m
[0;32mok: [dev-test-01] => (item=40-functions.zsh)[0m

TASK [common-shell : Symlink profile zsh config files to .zsh.d] ***************
[0;32mok: [dev-test-01] => (item=plugins.zsh)[0m
[0;32mok: [dev-test-01] => (item=config.zsh)[0m
[0;32mok: [dev-test-01] => (item=overrides.zsh)[0m

TASK [common-shell : Create machine type marker file] **************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Include set-zsh-shell tasks] ******************************
[0;36mincluded: /ansible/roles/common-shell/tasks/set-zsh-shell.yml for dev-test-01[0m

TASK [common-shell : Ensure zsh is installed] **********************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Check current shell] **************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Get zsh path] *********************************************
[0;32mok: [dev-test-01][0m

TASK [common-shell : Change default shell to zsh] ******************************
[0;32mok: [dev-test-01][0m

TASK [Display server type] *****************************************************
[0;32mok: [dev-test-01] => [0m
[0;32m  msg: |-[0m
[0;32m    âœ… Server configuration complete for dev-test-01[0m
[0;32m  [0m
[0;32m    Machine type will be auto-detected based on hostname:[0m
[0;32m    - prod* â†’ Production (!)[0m
[0;32m    - dev-* â†’ Dev server (Â·)[0m
[0;32m    - gaming* â†’ Gaming (Â·)[0m
[0;32m    - homelab* â†’ Homelab (Â·)[0m

PLAY RECAP *********************************************************************
[0;32mdev-test-01[0m                : [0;32mok=45  [0m changed=0    unreachable=0    failed=0    [0;36mskipped=13  [0m rescued=0    ignored=0   


[0;32mâœ… Idempotency test PASSED[0m
No changes detected on second run
[0;32mâœ… PASSED: Server Idempotency[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 13: Server Security Validation[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Security Validation ===[0m

1. SSH Key Permissions
  [1;33mâ—‹[0m No .ssh directory found (skipping SSH key checks)

2. Config File Ownership
  [0;32mâœ“[0m .zshrc owned by testuser
  [0;32mâœ“[0m starship.toml owned by testuser
  [0;32mâœ“[0m .zsh.d owned by testuser
  [0;32mâœ“[0m bin owned by testuser

3. No Secrets in Dotfiles
  [0;32mâœ“[0m No secrets detected in 01-zinit.zsh
  [0;32mâœ“[0m No secrets detected in 10-path.zsh
  [0;32mâœ“[0m No secrets detected in 20-env.zsh
  [0;32mâœ“[0m No secrets detected in 25-tools.zsh
  [0;32mâœ“[0m No secrets detected in 30-aliases.zsh
  [0;32mâœ“[0m No secrets detected in 40-functions.zsh
  [0;32mâœ“[0m No secrets detected in .zshrc
  [0;32mâœ“[0m No secrets detected in .zshenv
  [0;32mâœ“[0m No secrets detected in starship.toml

4. Sensitive Files Not in Dotfiles Repository
  [0;32mâœ“[0m .env not in dotfiles repository
  [0;32mâœ“[0m credentials.json not in dotfiles repository
  [0;32mâœ“[0m .aws/credentials not in dotfiles repository
  [0;32mâœ“[0m .ssh/id_rsa not in dotfiles repository
  [0;32mâœ“[0m .netrc not in dotfiles repository

5. Sudoers Configuration
  [1;33mâ—‹[0m User has passwordless sudo (test environment)


=== Assertion Summary ===
Passed: [0;32m19[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: Server Security Validation[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 14: Server Tool Versions[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Tool Version Verification ===[0m

1. Essential Tools
  [0;32mâœ“[0m zsh version 5.8.1 (expected major: 5)
  [0;32mâœ“[0m git version 2.34.1 (expected major: 2)
  [0;32mâœ“[0m starship version 1.24.0 (expected major: 1)

2. Modern Shell Tools
  [1;33mâ—‹[0m fzf not installed (optional tool)
  [1;33mâ—‹[0m zoxide not installed (optional tool)
  [0;32mâœ“[0m rg version 13.0.0 (expected major: 13)
  [1;33mâ—‹[0m bat not installed (optional tool)
  [1;33mâ—‹[0m eza not installed (optional tool)
  [1;33mâ—‹[0m fd not installed (optional tool)

3. Build Tools (if available)
  [0;32mâœ“[0m make version 4.3 (expected major: 4)
  [0;32mâœ“[0m curl version 7.81.0 (expected major: 7)
  [0;32mâœ“[0m wget version 1.21.2 (expected major: 1)

4. Python & Ansible
  [0;32mâœ“[0m python3 version 3.10.12 (expected major: 3)
  [0;32mâœ“[0m ansible version 2.17.14 (expected major: 2)

=== Version Check Summary ===
Note: Major version mismatches may indicate compatibility issues
Optional tools are not required for basic functionality


=== Assertion Summary ===
Passed: [0;32m9[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: Server Tool Versions[0m

[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[1;33mTest 15: Server Profile Isolation[0m
[1;33mContainer: server-test[0m
[1;33mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;34m=== Profile Isolation Validation ===[0m

1. Machine Type Detection
  [0;32mâœ“[0m Machine type marker exists: server

2. Profile-Specific Configuration
  [0;32mâœ“[0m Profile config symlink: plugins.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/server/plugins.zsh
  [0;32mâœ“[0m Profile config symlink: config.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/server/config.zsh
  [0;32mâœ“[0m Profile config symlink: overrides.zsh â†’ /home/testuser/dotfiles-test/zsh/profiles/server/overrides.zsh

3. Core Configuration Files (Universal Across Profiles)
  [0;32mâœ“[0m Core config exists: 01-zinit.zsh
  [0;32mâœ“[0m Core config exists: 10-path.zsh
  [0;32mâœ“[0m Core config exists: 20-env.zsh
  [0;32mâœ“[0m Core config exists: 30-aliases.zsh

4. Profile-Specific Behavior
  Detected Server profile
  [0;32mâœ“[0m Server-specific config configured

5. Starship Prompt Configuration
  [0;32mâœ“[0m Starship config exists
  [0;32mâœ“[0m Server-specific prompt character (!) found

6. Profile Isolation (No Cross-Contamination)
  [1;33mâ—‹[0m No profile markers found (using .machine-type only)
  [0;32mâœ“[0m Single active profile (no symlink contamination)

=== Profile Isolation Summary ===
Active Profile: server


=== Assertion Summary ===
Passed: [0;32m13[0m
Failed: [0;31m0[0m

[0;32mâœ… All assertions passed[0m
[0;32mâœ… PASSED: Server Profile Isolation[0m

[0;34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;34mâ•‘           Test Suite Summary               â•‘[0m
[0;34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Total tests:  15
Passed:       [0;32m15[0m
Failed:       [0;31m0[0m

[0;32mâœ… ALL TESTS PASSED[0m

[0;34mTest isolation: âœ“ WSL and Server tests ran in separate containers[0m
[0;34mIdempotency: âœ“ Both playbooks tested for idempotency[0m
[0;34mSecurity: âœ“ Security validation passed for both environments[0m
[0;34mVersions: âœ“ Tool versions verified[0m
make[1]: Entering directory '/home/magicmicky/Development/terminal_improvements/ansible-playbooks'
[0;34mStopping Docker test containers...[0m 
cd tests/docker && docker compose down
 Container ansible-test-wsl  Stopping
 Container ansible-test-server  Stopping
 Container ansible-test-ubuntu  Stopping
 Container ansible-test-ubuntu  Stopped
 Container ansible-test-ubuntu  Removing
 Container ansible-test-ubuntu  Removed
 Container ansible-test-wsl  Stopped
 Container ansible-test-wsl  Removing
 Container ansible-test-server  Stopped
 Container ansible-test-server  Removing
 Container ansible-test-wsl  Removed
 Container ansible-test-server  Removed
 Network docker_default  Removing
 Network docker_default  Removed
make[1]: Leaving directory '/home/magicmicky/Development/terminal_improvements/ansible-playbooks'
