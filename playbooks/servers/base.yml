---
# Server Base Configuration Playbook
# Configures base system: packages, Docker, users
# Uses shared server-base role

- name: Configure Server Base
  hosts: all
  become: true

  vars_files:
    - vars/base.yml

  pre_tasks:
    - name: Display deployment information
      ansible.builtin.debug:
        msg: |
          Configuring base system for {{ inventory_hostname }}
          Installing: packages, Docker, users

  roles:
    - role: server-base
      tags: ['base', 'packages', 'docker', 'users']

  post_tasks:
    - name: Display completion message
      ansible.builtin.debug:
        msg: |
          Base server configuration complete for {{ inventory_hostname }}

          Installed:
          - Base packages: git, htop, tar, zsh, acl, unzip, curl
          - Docker and Docker Compose
          - Users: magicmicky, ansible (with SSH keys)

          Next steps:
          - Run shell.yml to configure modern shell
          - Verify Docker: docker ps
          - Verify users: id magicmicky
